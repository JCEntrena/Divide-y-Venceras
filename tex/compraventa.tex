% Generator: GNU source-highlight, by Lorenzo Bettini, http://www.gnu.org/software/src-highlite
\noindent
\mbox{}\textit{\textcolor{Brown}{\#!/usr/bin/env\ ruby}} \\
\mbox{}\textit{\textcolor{Brown}{\#encoding\ utf8}} \\
\mbox{} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Compraventa.\ Este\ algoritmo\ halla\ la\ mayor\ diferencia\ b-a}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ entre\ elementos\ de\ un\ array,\ con\ b\ más\ a\ la\ derecha\ que\ a\ }} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Calcularemos\ recursivamente\ el\ mínimo\ del\ array\ y\ las}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ posiciones\ que\ verifican\ la\ mayor\ diferencia.\ }} \\
\mbox{} \\
\mbox{}\textit{\textcolor{Brown}{\#\ La\ función\ devuelve\ cuatro\ posiciones:\ [Posición\ de\ a,}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ posición\ de\ b,\ posición\ del\ mínimo\ del\ array,\ posición}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ del\ máximo\ del\ array]}} \\
\mbox{} \\
\mbox{}\textbf{\textcolor{Blue}{class}}\ Array \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{def}}\ compraventa \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ Caso\ base:\ Tenemos\ un\ array\ de\ tamaño\ 1.\ Todas\ }} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ las\ posiciones\ coinciden\ con\ la\ inicial.\ }} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{return}}\ \textcolor{BrickRed}{[}\textcolor{Purple}{0}\textcolor{BrickRed}{,}\ \textcolor{Purple}{0}\textcolor{BrickRed}{,}\ \textcolor{Purple}{0}\textcolor{BrickRed}{,}\ \textcolor{Purple}{0}\textcolor{BrickRed}{]}\ \textbf{\textcolor{Blue}{if}}\ size\ \textcolor{BrickRed}{==}\ \textcolor{Purple}{1}\ \ \ \ \ \ \ \ \ \ \ \ \  \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ De\ no\ ser\ así,\ llamamos\ recurvivamente\ a\ la\ }} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ función\ con\ las\ dos\ mitades\ izquierda\ y\ derecha.\ \ \ \ \ }} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ minimal$\_$izq\textcolor{BrickRed}{,}\ maximal$\_$izq\textcolor{BrickRed}{,}\ min$\_$izq\textcolor{BrickRed}{,}\ max$\_$izq\ \textcolor{BrickRed}{=}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{[}\textcolor{Purple}{0}\ \textcolor{BrickRed}{..}\ size\textcolor{BrickRed}{/}\textcolor{Purple}{2}\textcolor{BrickRed}{-}\textcolor{Purple}{1}\textcolor{BrickRed}{].}compraventa\  \\
\mbox{}\ \ \ \ \ \ \ \ minimal$\_$dcha\textcolor{BrickRed}{,}\ maximal$\_$dcha\textcolor{BrickRed}{,}\ min$\_$dcha\textcolor{BrickRed}{,}\ max$\_$dcha\ \textcolor{BrickRed}{=}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{[}size\textcolor{BrickRed}{/}\textcolor{Purple}{2}\ \textcolor{BrickRed}{..}\ size\ \textcolor{BrickRed}{-}\ \textcolor{Purple}{1}\textcolor{BrickRed}{].}compraventa \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ Ajustamos\ las\ posiciones\ de\ la\ parte\ derecha\ para}} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ que\ se\ refieran\ al\ array\ total,\ y\ no\ a\ la\ mitad\ }} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ derecha.\ }} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ minimal$\_$dcha\ \textcolor{BrickRed}{+=}\ size\textcolor{BrickRed}{/}\textcolor{Purple}{2} \\
\mbox{}\ \ \ \ \ \ \ \ maximal$\_$dcha\ \textcolor{BrickRed}{+=}\ size\textcolor{BrickRed}{/}\textcolor{Purple}{2} \\
\mbox{}\ \ \ \ \ \ \ \ min$\_$dcha\ \textcolor{BrickRed}{+=}\ size\textcolor{BrickRed}{/}\textcolor{Purple}{2} \\
\mbox{}\ \ \ \ \ \ \ \ max$\_$dcha\ \textcolor{BrickRed}{+=}\ size\textcolor{BrickRed}{/}\textcolor{Purple}{2} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}\textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}maximal$\_$izq\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{-}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}minimal$\_$izq\textcolor{BrickRed}{))}\ \textcolor{BrickRed}{\textless{}}\ \textcolor{BrickRed}{(}\textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}maximal$\_$dcha\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{-}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}minimal$\_$dcha\textcolor{BrickRed}{))} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ minimal\ \textcolor{BrickRed}{=}\ minimal$\_$dcha \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ maximal\ \textcolor{BrickRed}{=}\ maximal$\_$dcha \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{else}}\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ minimal\ \textcolor{BrickRed}{=}\ minimal$\_$izq \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ maximal\ \textcolor{BrickRed}{=}\ maximal$\_$izq \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{end}}\  \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}\textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}maximal\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{-}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}minimal\textcolor{BrickRed}{))}\ \textcolor{BrickRed}{\textless{}}\ \textcolor{BrickRed}{(}\textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}max$\_$dcha\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{-}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}min$\_$izq\textcolor{BrickRed}{))} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ maximal\ \textcolor{BrickRed}{=}\ max$\_$dcha \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ minimal\ \textcolor{BrickRed}{=}\ min$\_$izq \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{end}} \\
\mbox{}\ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\ Recalculamos\ el\ mínimo\ y\ máximo.\ \ }} \\
\mbox{}\ \ \ \ \ \ \ \ min\ \textcolor{BrickRed}{=}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}min$\_$izq\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{\textless{}}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}min$\_$dcha\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{?}\ min$\_$izq\ \textcolor{BrickRed}{:}\ min$\_$dcha \\
\mbox{}\ \ \ \ \ \ \ \ max\ \textcolor{BrickRed}{=}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}max$\_$izq\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{\textgreater{}}\ \textbf{\textcolor{Blue}{self}}\textcolor{BrickRed}{.}at\textcolor{BrickRed}{(}max$\_$dcha\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{?}\ max$\_$izq\ \textcolor{BrickRed}{:}\ max$\_$dcha \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textcolor{BrickRed}{[}minimal\textcolor{BrickRed}{,}\ maximal\textcolor{BrickRed}{,}\ min\textcolor{BrickRed}{,}\ max\textcolor{BrickRed}{]}\  \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{end}}\  \\
\mbox{}\textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{}array\ \textcolor{BrickRed}{=}\ \textcolor{BrickRed}{[}\textcolor{Purple}{40}\textcolor{BrickRed}{,}\textcolor{Purple}{10}\textcolor{BrickRed}{,}\textcolor{Purple}{50}\textcolor{BrickRed}{,}\textcolor{Purple}{3}\textcolor{BrickRed}{,}\textcolor{Purple}{45}\textcolor{BrickRed}{,}\textcolor{Purple}{12}\textcolor{BrickRed}{]} \\
\mbox{} \\
\mbox{}compra\textcolor{BrickRed}{,}\ venta\textcolor{BrickRed}{,}\ min\textcolor{BrickRed}{,}\ max\ \textcolor{BrickRed}{=}\ array\textcolor{BrickRed}{.}compraventa \\
\mbox{} \\
\mbox{}puts\ \texttt{\textcolor{Red}{"{}Momento\ de\ compra:\ \#\{compra\}.\ Valor\ de\ compra:\ \#\{array.at(compra)\}\ \textbackslash{}nMomento\ de\ venta:\ \#\{venta\}.\ Valor\ de\ venta:\ \#\{array.at(venta)\}"{}}} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}
